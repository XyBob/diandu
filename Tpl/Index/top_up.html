{extends file="../home.html"}
{block name="title"}{$head_title}{/block}
{block name="css"}
{literal}
<link rel="stylesheet" type="text/css" href="/Public/Css/front/front_css/header.css?version={$version}"/>
<link rel="stylesheet" type="text/css" href="/Public/Css/front/front_css/top_up.css?version={$version}"/>
<style></style>
{/literal}
{/block}
{block name="content"}
<!--todo 头部-->
<div class="header">
    <div class="left_header native_back" onclick="history.go(-1)">
        <div class="icon_add_person icon_left_white"></div>
    </div>
    <h1>充值</h1>
    <div class="header_right"><div class="person_page_img icon_more"></div></div>
</div>
<p class="title clearfix"><span class="fl">选择金额（元）</span><span class="fr blue" onclick="location.href='/Index/help_center'">帮助</span></p>
<div class="select_money">
    <div class="clearfix">
        <div class="fl active">500<span class="person_page_img icon_xuanzhong_red"></span></div>
        <div class="fr">200<span class="person_page_img icon_xuanzhong_red"></span></div>
        <div class="fl">100<span class="person_page_img icon_xuanzhong_red"></span></div>
        <div class="fr">50<span class="person_page_img icon_xuanzhong_red"></span></div>
    </div>
</div>
<!--todo 支付方式的选择-->
<ul class="pay_style">
    <li class="style active">
        <div class="left_control">
            <div class="icon person_page_img icon_yuezhif"></div>
            <div class="text">
                <span class="blank">余额支付</span>
                <span class="grey">推荐使用</span>
            </div>
        </div>
        <div class="right_img person_page_img icon_select"></div>
    </li>
    <li class="style">
        <div class="left_control">
            <div class="icon person_page_img icon_wechatpay"></div>
            <div class="text">
                <span class="blank">微信支付</span>
                <span class="grey">需安装微信5.0及以上版本的用户使用</span>
            </div>
        </div>
        <div class="right_img person_page_img icon_select"></div>
    </li>
    <li class="style">
        <div class="left_control">
            <div class="icon person_page_img icon_yuezhif"></div>
            <div class="text">
                <span class="blank">余额支付</span>
                <span class="grey">推荐使用</span>
            </div>
        </div>
        <div class="right_img person_page_img icon_select"></div>
    </li>
</ul>
<!--todo 确定支付-->
<div class="pay_footer">
    <div class="sure_pay" id="sure_pay">确认支付</div>
    <p class="text">点击确认支付，即表示已阅读并同意<span class="blue" onclick="location.href='//Index/help_center'">充值说明</span></p>
</div>
<div class="pay_loading">
    <i></i>
    <span>正在加载...</span>
</div>
{/block}
{block name="js"}
{literal}
<script type="text/javascript">
    /*todo 充值模态框里面的切换*/
    $('.select_money .clearfix div').on('click',function(){
        $(this).addClass('active').siblings('.active').removeClass('active');
    });
    /*todo 充值方式的切换*/
    $('.pay_style .style').on('click',function(){
        $(this).addClass('active').siblings('.active').removeClass('active');
    });
    /*todo 支付*/
    $('#sure_pay').on('click',function(){
        /*todo 获取的充值金额*/
        var money=$('.select_money .clearfix div.active').text();
        /*todo 选择的支付方式*/
        var style=$('.pay_style .style.active .text .blank').html();
        console.log(money,style);
        //提交
        $.ajax({
            url:"",
            type:"POST",
            dataType:"json",
            data:{
                order_id:order_id,
            },
            timeout:30000,
            success:function(d){
                $(".pay_loading").show();
                //支付加载消失，后台判断
                setTimeout(function(){
                    $(".pay_loading").hide();
                },1000);
            },
            error:function(e){
                console.log(e);
            }
        });

    });
</script>
{/literal}
{/block}